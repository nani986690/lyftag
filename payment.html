<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lyf Tag â€“ Demo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

<style>
body{
  font-family: Arial, sans-serif;
  background:#f3f4ff;
  padding:20px;
}
.container{
  max-width:450px;
  margin:auto;
  background:#fff;
  padding:20px;
  border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.1);
}
h2{
  text-align:center;
  margin-bottom:20px;
}
input,select,button{
  width:100%;
  padding:12px;
  margin-bottom:12px;
  border-radius:8px;
  border:1px solid #ddd;
  font-size:14px;
}
button{
  background:#6d28d9;
  color:#fff;
  border:none;
  font-weight:bold;
  cursor:pointer;
}
button:hover{background:#5b21b6;}
.row{display:none;}
.success{
  text-align:center;
  color:green;
  font-weight:bold;
  margin:15px 0;
}
#qr{display:flex;justify-content:center;margin:20px 0;}
small{color:#555;}

.popup-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
.popup-content {
  background: #fff;
  padding: 30px;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
}
.popup-content h3 {
  color: #6d28d9;
  margin-bottom: 15px;
}
.popup-content p {
  color: #555;
  margin-bottom: 20px;
}
.popup-btn {
  background: #6d28d9;
  color: #fff;
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
}
.popup-btn:hover {
  background: #5b21b6;
}
</style>
</head>

<body>

<div class="container">
  <h2>Lyf Tag â€“ Demo</h2>

  <!-- PLAN -->
  <select id="plan">
    <option value="">Select Plan</option>
    <option>Basic</option>
    <option>Pro</option>
    <option>Premium</option>
  </select>

  <!-- BASIC DETAILS -->
  <input id="name" placeholder="Full Name">
  <input id="vehicle" placeholder="Vehicle Details (Bike/Car No)">
  <input id="blood" placeholder="Blood Group">

  <!-- BLOOD DONOR -->
  <select id="donor" onchange="donorCheck()">
    <option value="">Blood Donor?</option>
    <option value="Yes">Yes</option>
    <option value="No">No</option>
  </select>

  <div id="alcoholDiv" class="row">
    <select id="alcohol">
      <option value="">Alcoholic?</option>
      <option>Non Alcoholic</option>
      <option>Alcoholic</option>
    </select>
  </div>

  <!-- UPLOADS -->
  <small>Passport Size Photo</small>
  <input type="file" id="photo">

  <small>Upload Documents</small>
  <input type="file" id="aadhaar">
  <input type="file" id="pan">
  <input type="file" id="license">

  <!-- PASSWORD -->
  <input type="password" id="password" placeholder="Set Password for Secret Docs">

  <!-- BUY -->
  <button onclick="buyNow()">Buy & Generate QR</button>

  <div id="status"></div>
  <div id="qr"></div>

  <button id="downloadBtn" style="display:none;" onclick="downloadQR()">
    Download QR
  </button>
</div>

<!-- POPUP -->
<div id="popupOverlay" class="popup-overlay">
  <div class="popup-content">
    <h3>âœ… Details Saved!</h3>
    <p>Your information has been successfully saved to local storage.</p>
    <button class="popup-btn" onclick="closePopup()">OK</button>
  </div>
</div>

<script>
function donorCheck(){
  const donor = document.getElementById("donor").value;
  document.getElementById("alcoholDiv").style.display =
    donor === "Yes" ? "block" : "none";
}

function buyNow(){

  const planVal     = document.getElementById("plan").value.trim();
  const nameVal     = document.getElementById("name").value.trim();
  const vehicleVal  = document.getElementById("vehicle").value.trim();
  const bloodVal    = document.getElementById("blood").value.trim();
  const donorVal    = document.getElementById("donor").value;
  const alcoholVal  = document.getElementById("alcohol").value;
  const passwordVal = document.getElementById("password").value;

  // âœ… Proper validation
  if(planVal === "" || nameVal === "" || bloodVal === ""){
    alert("Please fill required details");
    return;
  }

  const data = {
    plan: planVal,
    name: nameVal,
    vehicle: vehicleVal,
    blood: bloodVal,
    donor: donorVal,
    alcohol: donorVal === "Yes" ? alcoholVal : "NA",
    hasDocs: true,
    protected: passwordVal ? true : false
  };

  // ðŸ’¾ Save to localStorage
  localStorage.setItem("lyfTagData", JSON.stringify(data));
  localStorage.setItem("lyfTagDataTime", new Date().toLocaleString());

  // ðŸ”” Show popup
  showPopup();

  document.getElementById("status").innerHTML =
    "<div class='success'>âœ… Payment Successful</div>";

  const qrBox = document.getElementById("qr");
  qrBox.innerHTML = "";

  new QRCode(qrBox, {
    text: JSON.stringify(data),
    width: 200,
    height: 200
  });

  document.getElementById("downloadBtn").style.display = "block";
}

function showPopup(){
  document.getElementById("popupOverlay").style.display = "flex";
}

function closePopup(){
  document.getElementById("popupOverlay").style.display = "none";
}

function downloadQR(){
  const img = document.querySelector("#qr img");
  const a = document.createElement("a");
  a.href = img.src;
  a.download = "lyf-tag-qr.png";
  a.click();
}
</script>


</body>
</html>